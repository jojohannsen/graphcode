This document describes how the Graph Notation implies State Class fields.

The following general rules describe what is in a State Field:

<GENERAL_RULES>

- Any human input is saved in a Field
- Any value passed to invoke the graph is saved in a Field
- Any value generated by an LLM is saved in a Field
- Any data READ by a Node Function is read from a Field
- Any data that a Node Function WRITE is a Field
- Any value calculated by a Node Function is a WRITE to a Field

</GENERAL_RULES>

State Fields can be categories by which rules caused them to be added to State.

When we are deriving State Fields, we use:

- The README for the graph
- The current State Fields
- The Comment/Notation pair

For each State field we get:

```python
class FieldCategory(str, Enum):
    """Categories of state fields in graph specifications."""
    HUMAN_INPUT = "human_input"
    MODEL_GENERATED = "model_generated" 
    GRAPH_CALCULATED = "graph"
    GRAPH_EXECUTION = "tracing"
    
class StateField(BaseModel):
    """Represents a single field in the graph state."""
    
    name: str = Field(description="Field name (valid Python identifier)")
    type_annotation: str = Field(description="Python type annotation as string")
    category: FieldCategory = Field(description="Category of field")
    description: str = Field(description="Purpose and usage description")
    read_by_nodes: Set[str] = Field(
        default_factory=set,
        description="Set of node names that read this field"
    )
    written_by_nodes: Set[str] = Field(
        default_factory=set,
        description="Set of node names that write to this field"
    )

```



Here's some examples that imply a State Field:

1. any human input
   ```
   # make search query and ask human if we should continue
   make_search_query -> should_continue(next_node, END)
   ```

   This should give a State Field: 

   - name: should_search
   - type_annotation: bool
   - category: HUMAN_INPUT
   - Description: "True if human indicates we should continue"

2. any value passed when graph invoked

   ```
   # invoke graph with topic
   JokesterState -> generate_joke
   ```

   This should give a State Field:

   - name: joke_topic
   - type_annotation: str
   - Category: INVOKE_PARAMETER
   - Description: the topic we are creating a joke about

3. any value generated by an LLM

   ```
   # generate a joke about topic
   generate_joke -> tell_joke
   ```

   This should give State Field:

   - Name: generated_joke
   - type_annotation: str
   - Category: MODEL_GENERATED
   - Description: the joke generated by the LLM
   - Written_by_node: generate_joke

â€‹	This should also update the "topic" State Field to include:  read_by_node: generate_joke

